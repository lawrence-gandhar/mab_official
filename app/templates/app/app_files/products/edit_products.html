{% load common_components %}
{% loader_component %}
{% load static %}


<style>
select.form-control{padding:0px 10px;}
select.form-control option{color : #000000; }
input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        margin: 0;
    }
    .img-wrap {
            position: relative;
            display: inline-block;
            font-size: 0;
        }

            .img-wrap .close {
                position: absolute;
                top: 2px;
                right: 2px;
                z-index: 100;
                background-color: #D0E5F5;
                padding: 5px 2px 2px;
                color: #000;
                font-weight: bolder;
                cursor: pointer;
                opacity: .5;
                font-size: 23px;
                line-height: 10px;
                border-radius: 50%;
                display: none;
            }

            .img-wrap:hover .close {
                opacity: 1;
                background-color: #ff0000;
            }

optgroup{
    color: gray;
}
</style>

<div class="row">
    <div class="col-lg-12" style="padding:0px">
        <div class="card">    
            <form method="post" enctype="multipart/form-data">
                <div class="card-header card-header-primary">
                    <h4 class="card-title ">Edit Product</h4>
                </div>  
                <div class="card-body" style="margin-left: 13px;">
                    {% csrf_token %}
                    <div class="table" style="padding:10px 0px; color:#FFFFFF; width:100%">
                        <table class="table-responsive">
                            <tbody style=" width: 100%; display: inline-table;">
                                <tr class="disabled-tr">
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Product Type
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.product_type}}
                                    </td>   
                                    <td style="border:0px; text-align:center; padding:10px 20px 0px 20px;" rowspan="8">
                                        <img id="myImg" class="responsive" src="" style=" margin-bottom: 6px; color: white; width: 100%; height: 225px;"> 
                                        {{add_product_images_form.product_image}}
                                    </td>                                                           
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        SKU/Product ID</label>
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.sku}}
                                    </td>                        
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Product Name
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.product_name}}
                                    </td>                        
                                </tr>
                                <tr style="display: none;">
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Product Description
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.product_description}}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        HSN/SAC Code
                                    </td>
                                    <td style="border:0px;">
                                        <div style="width:88%; display:inline-block">
                                            {{add_product_form.hsn_code}}
                                        </div>
                                        <a href="{% static 'images/GST_HSN-SAC_CODES.pdf' %}" target="_blank">
                                            <i class="material-icons" style="margin-left:20px; display:inline-block">picture_as_pdf</i>
                                        </a>
                                    </td>                        
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Units
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.unit}}
                                    </td>                        
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        TDS
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.tax}}
                                    </td>                        
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        GST
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.gst}}
                                    </td>                        
                                </tr>
                                
                                <tr style="display: none;">
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Abatement
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.abatement}}
                                    </td>                        
                                </tr>
                                {% if product_type == 2 %}
                                    <tr>
                                        <td colspan="3" style="border:0px;background-color:#000000;">
                                            PRODUCTS IN BUNDLE
                                            <i class="material-icons" style="position:relative; top:5px; font-size:18px; margin-right:10px; float:right; vertical-align:middle;">queue</i>
                                        </td>                      
                                    </tr>                                
                                    <tr>
                                        <td style="border:0px; padding:0px; padding-bottom:10px;" colspan="3">
                                            <table class="table-responsive table-bordered">
                                                <tbody style="width:100%; display:inline-table;">
                                                    <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                        <td class="text-center" style="width:80px">SL. No.</td>                                                        
                                                        <td class="text-center">Product Type</td>
                                                        <td class="text-center">SKU</td>
                                                        <td class="text-center">Product Name</td>
                                                        <td class="text-center" style="width:100px">Quantity</td>
                                                        <td class="text-center" style="width:100px">Action</td>
                                                    </tr>
                                                    {% for product in bundle_products %}
                                                        <tr style="width:100%; font-size:12px;">
                                                            <td style="width:80px">{{ forloop.counter }}</td>                                                        
                                                            <td>{{ product.product.get_product_type_display|default_if_none:"" }}</td>
                                                            <td>{{ product.product.sku|default_if_none:"" }}</td>
                                                            <td>{{ product.product.product_name|default_if_none:""|upper }}</td>
                                                            <td>{{ product.quantity|default_if_none:"0" }}</td>
                                                            <td class="text-center">
                                                                <i class="material-icons" style="font-size:18px; margin-right:10px;">create</i>
                                                                <i class="material-icons" style="color:#FF0000; font-size:18px">delete_forever</i>
                                                            </td>
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                {% endif %}
                                <tr>
                                    <td colspan="3" style="border:0px;background-color:#000000;">
                                        SALES INFORMATION
                                    </td>
                                    <td>
                                        <span style="margin-left:40px;display: none;">
                                            {{add_product_form.is_sales}}
                                        </span>
                                    </td>                        
                                </tr>                                
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Selling Price
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.selling_price}}
                                    </td>
                                </tr>
                                <tr style="display: none;">
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Discount
                                    </td>
                                    <td style="border:0px;">    
                                        {{add_product_form.discount}}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Accounts
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.sales_account}}
                                    </td>                        
                                </tr>
                                <tr>
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Product Description
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.product_description}}
                                    </td>
                                </tr>
                                <tr style="display: none;">
                                    <td style="border:0px; width:150px; vertical-align:bottom">
                                        Accounts
                                    </td>
                                    <td style="border:0px;">
                                        {{add_product_form.purchase_account}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>    
                    </div>
                </div>
                <div class="card-footer"  style="justify-content: center;">
                    <button class="btn btn-success" id="add_product" style="width: 9%;">Save</button>
                    <a class="btn btn-warning" href="{% url 'view_products' %}">Cancel</a>              
                </div>
            </form>
        </div>
    </div>
</div>