{% load common_components %}
{% loader_component %}

<style>
select.form-control, input.form-control, textarea.form-control{
    padding:0px 10px;
}
select.form-control option{color : #000000; }

table{
    font-size:14px;
    color:#a7a4a4;
}

input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        margin: 0;
    }

</style>

<div class="row">
    <div class="col-lg-12" style="padding:0px">
        <div class="card">
            <div class="card-header card-header-primary">
                <h4 class="card-title ">Edit Contact</h4>
            </div>                
            <div class="card-body">                    
                <div class="table" style="padding:10px 0px; color:#FFFFFF; width:100%">
                    <table class="table-responsive">
                        <tbody style="width: 100%; display: inline-table;">
                            <tr>
                                <td colspan="2">
                                    <button class="btn btn-sm btn-warning pull-right" style="margin-bottom:15px; float:right" type="button" data-toggle="modal" data-target="#editContactModal">Edit Contact Details</button>
                                </td>
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Customer Type
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.get_customer_type_display|default_if_none:"" }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Is Sub Customer
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.get_is_sub_customer_display|default_if_none:"" }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Salutation
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.get_salutation_display|default_if_none:"" }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Contact
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.contact_name|default_if_none:"" | truncatechars:25 }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Contact Display Name
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.display_name|default_if_none:""| truncatechars:25 }}
                                </td>                                    
                            </tr>  
                            <tr class="disabled-tr">
                                <td style=" width:150px; border:0px; vertical-align: bottom">
                                    Organisation Type
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.get_organization_type_display|default_if_none:"" }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Organisation Name
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.organization_name|default_if_none:"" | truncatechars:25}}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style="border:0px; vertical-align: bottom">
                                    Is MSME Registered
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.get_is_msme_reg_display|default_if_none:"" }}
                                </td>                                    
                            </tr>  
                            <tr class="disabled-tr">
                                <td style=" width:150px; border:0px; vertical-align: bottom">
                                    Email Address
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.email|default_if_none:"" }}
                                </td>                                    
                            </tr>
                            <tr class="disabled-tr">
                                <td style=" width:150px; border:0px; vertical-align: bottom;padding-bottom: 3%;">
                                    Phone/Mobile
                                </td>
                                <td style="border:0px;">
                                    {{ contact_details.phone|default_if_none:"" }}
                                </td>                                    
                            </tr> 
                            <!----------------- Tax & Payment ---------------->
                            <tr>
                                <tr style="background-color: #556b2f;color: white;">
                                    <td style="padding-top: 15px;"> 
                                        Tax & Payment
                                    </td>
                                    
                                    <td colspan="3" style="padding-bottom: 0px;padding-top: 8px;">
                                        <button class="btn btn-sm btn-warning pull-right" style="margin-bottom:15px; float:right" type="button" data-toggle="modal" data-target="#editTaxModal">Edit Tax Details</button>
                                    </td>
                                </tr>
                                
                                <table class="table-responsive table-bordered" style="padding-top: 20px;">
                                    <tbody style="width:100%; display:inline-table;">
                                        

                                        <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                                                                   
                                            <td class="text-center" style="width: 25%;border: 1px solid white;">PAN</td>
                                            <td class="text-center" style="width: 30%;border: 1px solid white;">GST Registration Type</td>
                                            <td class="text-center" style="width: 25%;border: 1px solid white;">GSTIN</td>
                                                           
                                        </tr>                                                
                                        
                                            <tr style="font-size:12px">
                                                                 
                                                <td style="vertical-align: bottom;border: 1px solid white;">
                                                    {{ tax_form_details.pan }}
                                                </td>  
                                                <td style="vertical-align: bottom;border: 1px solid white;">
                                                    {{ tax_form_details.get_gst_reg_type_display }}
                                                </td>               
                                                <td style="vertical-align: bottom;border: 1px solid white;">
                                                    {{ tax_form_details.gstin}}
                                                </td>         
                                                                                   
                                            </tr>
                                    </tbody>
                                </table>
                            </tr>       
                            <!------------------------ Address Details -------------------------->
                            <tr>
                                <div class="row" style="margin-top: 3%;margin-bottom: 2%;background-color: #556b2f;color: white;margin-left: 0px;margin-right: 0px;">
                                    <div class="col" style="margin-top: 15px;margin-left: -8px;"> 
                                        Address Details
                                    </div>
                                    
                                    <div style="margin-top: 8px;margin-right: 6px;"> 
                                        <button data-toggle="modal" data-target="#newAddressModal" class="btn btn-sm btn-primary pull-right" style="margin-bottom:15px; float:right; margin-left:10px;" type="button">
                                            <i class="material-icons">add_box</i> Add New
                                        </button> 
                                    </div>
                                </div>

                                <tr>
                                    <table class="table-responsive table-bordered">
                                        <tbody style="width:100%; display:inline-table;">
                                            <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                                                                       
                                                <td class="text-center" style="width: 15%;border: 1px solid white;">Contact Person</td>
                                                <td class="text-center" style="width: 9%;border: 1px solid white;">Flat/Building No.</td>
                                                <td class="text-center" style="width: 10%;border: 1px solid white;">Street</td>
                                                <td class="text-center" style="width: 11%;border: 1px solid white;">City</td>
                                                <td class="text-center" style="width: 1%;border: 1px solid white;">Pincode</td>               
                                                <td class="text-center" style="width:17%;border: 1px solid white;">State</td>               
                                                <td class="text-center" style="width:11%;border: 1px solid white;">Country</td>  
                                                <td class="text-center" style="border: 1px solid white;">Is Shipping</td>
                                                <td class="text-center" style="border: 1px solid white;">Is Billing</td>             
                                                <td class="text-center" style="border: 1px solid white;">Action</td>                
                                            </tr>                                                
                                            {% for i in contact_addresses %}
                                                <tr id="table-{{forloop.counter}}" style="font-size:12px">
                                                   
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.contact_person|default_if_none:""|truncatechars:15 }}
                                                    </td>                  
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.flat_no|default_if_none:""|truncatechars:10 }}
                                                    </td>  
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.street|default_if_none:""|truncatechars:10 }}
                                                    </td>               
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.city|default_if_none:""|truncatechars:15 }}
                                                    </td>   
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.pincode|default_if_none:"" }}
                                                    </td>      
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.state|default_if_none:""|truncatechars:15 }}
                                                    </td>  
                                                    <td style="vertical-align: bottom;border: 1px solid white;">
                                                        {{ i.country|default_if_none:""|truncatechars:15 }}
                                                    </td> 
                                                    <td style="vertical-align: bottom; text-align:center;border: 1px solid white;">                                                                    
                                                        {{ i.get_is_shipping_address_display  }}
                                                    </td>
                                                    <td style="vertical-align: bottom; text-align:center;border: 1px solid white;">
                                                        {{ i.get_is_billing_address_display }}
                                                    </td>
                                                    <td style="vertical-align: bottom;border: 1px solid white;">                                                                
                                                        <i title="Edit" class="material-icons" style="cursor:pointer; font-size:18px; color:#74ff63; position:relative; vertical-align:middle;" onclick="openAddressModal({{forloop.counter}}, '{{i.is_billing_address}}', '{{i.is_shipping_address}}')">create</i>
                                                        <i title="Delete" class="material-icons" data-toggle="modal" data-target="#del{{i.id}}" style="cursor:pointer; font-size:18px; color:#ff1f1f; margin-left:5px; position:relative; vertical-align:middle;">delete_forever</i>
                                                    
                                                        <!-- delete model popup -->
                                                <div class="modal " tabindex="-1" role="dialog" id="del{{i.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                                    <div class="modal-dialog" role="document" style="border-top: none;">
                                                        <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                            <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                                
                                                            </div>
                                                            <div class="modal-body" style="border-top: none;position: bottom;">
                                                                <h4 align="center"><b><font color="black">Are you sure you want to delete {{ i.contact_person|default_if_none:""|truncatechars:15 }}. Deleting contacts will not affect reports or historical transactions. </font></b></h4>
                                                            </div>
                                                            
                                                            <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                                <center><button onclick="delete_address({{i.id}})" class="btn btn-success mr-2" style="align-content: left;">Yes</button></center>
                                                                <button aria-label="Close" data-dismiss="modal" class="btn btn-warning">No</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                    </td>                                   
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>   
                                </tr> 
                            </tr>
                            <!---------------------- Account Details  -------------------------->
                            <tr>
                                <div class="row" style="margin-top: 3%;margin-bottom: 2%;background-color: #556b2f;color: white;margin-left: 0px;margin-right: 0px;">
                                    <div class="col" style="margin-top: 15px;margin-left: -8px;"> 
                                        Account Details
                                    </div>
                                    
                                    <div style="margin-top: 8px;margin-right: 6px;"> 
                                        <button data-toggle="modal" data-target="#newAccountsModal" class="btn btn-sm btn-primary pull-right" style="margin-bottom:15px; float:right; margin-left:10px;" type="button">
                                            <i class="material-icons">add_box</i> Add New
                                        </button>
                                    </div>
                                </div>

                                <table class="table-responsive table-bordered">
                                    <tbody style="width:100%; display:inline-table;">
                                        <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                                                                   
                                            <td class="text-center" style="width: 20%;border: 1px solid white;">Account Holder</td>
                                            <td class="text-center" style="width: 21%;border: 1px solid white;">Account Number</td>
                                            <td class="text-center" style="width:15%;border: 1px solid white;">IFSC Code</td>
                                            <td class="text-center" style="width: 16%;border: 1px solid white;">Bank Name</td>
                                            <td class="text-center" style="width:17%;border: 1px solid white;">Branch Name</td>              
                                            <td class="text-center" width="60px;border: 1px solid white;">Action</td>                
                                        </tr>   
                                        {% for i in contact_accounts %}
                                            <tr>
                                                
                                                <td style="border:0px;border: 1px solid white;" class="account_holder_name">
                                                    {{ i.account_holder_name|default_if_none:""|truncatechars:20}}
                                                </td> 
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ i.account_number|default_if_none:""|truncatechars:20}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ i.ifsc_code|default_if_none:""}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ i.bank_name|default_if_none:""|truncatechars:20 }}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ i.bank_branch_name|default_if_none:""|truncatechars:20 }}
                                                </td>
                                                <td style="vertical-align: bottom;border: 1px solid white;" class="text-center">                                                                
                                                    <i title="Edit" class="material-icons" style="cursor:pointer; font-size:18px; color:#74ff63; position:relative; vertical-align:middle;" onclick="openAccountsModal({{forloop.counter}})">create</i>
                                                    <i title="Delete" class="material-icons" data-toggle="modal" data-target="#del{{i.id}}" style="cursor:pointer; font-size:18px; color:#ff1f1f; margin-left:5px; position:relative; vertical-align:middle;">delete_forever</i>
                                                
                                                <!-- delete model popup -->
                                                <div class="modal " tabindex="-1" role="dialog" id="del{{i.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                                    <div class="modal-dialog" role="document" style="border-top: none;">
                                                        <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                            <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                                
                                                            </div>
                                                            <div class="modal-body" style="border-top: none;position: bottom;">
                                                                <h4><b><font color="black">Are you sure you want to delete {{ i.account_holder_name|default_if_none:""|truncatechars:15}}. Deleting contacts will not affect reports or historical transactions. </font></b></h4>
                                                            </div>
                                                            
                                                            <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                                <center><button onclick="delete_accounts({{i.id}})" class="btn btn-success mr-2" style="align-content: left;">Yes</button></center>
                                                                <button aria-label="Close" data-dismiss="modal" class="btn btn-warning">No</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                </td>  
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table> 
                            </tr>
                            <!--------------------------- Other Details -------------------------->
                            <tr>
                                <div class="row" style="margin-top: 3%;margin-bottom: 2%;background-color: #556b2f;color: white;margin-left: 0px;margin-right: 0px;">
                                    <div class="col" style="margin-top: 15px;margin-left: -8px;"> 
                                        Other Details
                                    </div>
                                    
                                    <div style="margin-top: 8px;margin-right: 6px;"> 
                                        <button class="btn btn-sm btn-warning pull-right" style="margin-bottom:15px; float:right" type="button" data-toggle="modal" data-target="#editOrganisationModal">Edit Other Details</button>
                                    </div>
                                </div>

                                <table class="table-responsive table-bordered">
                                    <tbody style="width:100%; display:inline-table;">
                                        <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                                                                    
                                            <td class="text-center" style="width:20%;border: 1px solid white;">Preferred Currency</td>
                                            <td class="text-center" style="width: 16%;border: 1px solid white;">Opening Balance</td>
                                            <td class="text-center" style="width: 18%;border: 1px solid white;">Payment Method</td>
                                            <td class="text-center" style="width: 15%;border: 1px solid white;">Preferred Delivery</td>
                                            <td class="text-center" style="width: 15%;border: 1px solid white;">Invoice Terms</td>              
                                            <td class="text-center" style="width:16%;border: 1px solid white;">Billing Terms</td>   

                                        </tr>   
                                        
                                            <tr>
                                                <td style="border:0px;border: 1px solid white;" class="account_holder_name">
                                                    {{ tax_form_details.get_preferred_currency_display}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;" class="account_holder_name">
                                                    {{ tax_form_details.opening_balance|default_if_none:"" }}
                                                </td> 
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ tax_form_details.get_preferred_payment_method_display}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ tax_form_details.get_preferred_delivery_display}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ tax_form_details.get_invoice_terms_display}}
                                                </td>
                                                <td style="border:0px;border: 1px solid white;">
                                                    {{ tax_form_details.get_bills_terms_display}}
                                                </td>
                                                  
                                            </tr>
                                        
                                    </tbody>
                                </table>
                            </tr>
                            <!------------------------- Social Connect & Notes ----------------------->
                            <tr>
                                <div class="row" style="margin-top: 3%;margin-bottom: 2%;background-color: #556b2f;color: white;margin-left: 0px;margin-right: 0px;">
                                    <div class="col" style="margin-top: 15px;margin-left: -8px;"> 
                                        Social Connect & Notes
                                    </div>
                                    
                                    <div style="margin-top: 8px;margin-right: 6px;"> 
                                        <button class="btn btn-sm btn-warning pull-right" style="margin-bottom:15px; float:right" type="button" data-toggle="modal" data-target="#editSocialModal">Edit Social Details</button>
                                    </div>
                                </div>

                                <table class="table-responsive table-bordered">
                                    <tbody style="width:100%; display:inline-table;">
                                        <tr style="width:100%; background-color: #EEEEEE; color:#000000; font-size:11px; font-weight:bold;">
                                                                                                    
                                            <td class="text-center" style="width: 20%;border: 1px solid white;">Website</td>
                                            <td class="text-center" style="width: 20%;border: 1px solid white;">Facebook</td>
                                            <td class="text-center" style="width: 20%;border: 1px solid white;">Twitter</td>
                                            <td class="text-center" style="width: 20%;border: 1px solid white;">Notes</td>
                                                         
                                              
                                        </tr>   
                                        
                                            <tr>
                                                <td style="border: 1px solid white;" class="account_holder_name">
                                                    {{ contact_details.website|truncatechars:25 }}
                                                </td>
                                                <td style="border: 1px solid white;" class="account_holder_name">
                                                    {{ contact_details.facebook|truncatechars:25 }}
                                                </td> 
                                                <td style="border: 1px solid white;">
                                                    {{ contact_details.twitter|truncatechars:25 }}
                                                </td>
                                                <td style="border: 1px solid white;">
                                                    {{ contact_details.notes|truncatechars:25}}
                                                </td>
                                               
                                            </tr>  
                                    </tbody>
                                </table>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- EDIT CONTACT DETAILS MODAL -->

<div class="modal fade" id="editContactModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'edit_contact_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Contact Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <table class="table-responsive">
                        <tbody style=" width: 100%; display: inline-table;">
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Customer Type
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.customer_type }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Is Sub Customer
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.is_sub_customer }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Salutation
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.salutation }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Contact
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.contact_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Contact Display Name
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.display_name }}
                                </td>                                    
                            </tr>  
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Organisation Type
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.organization_type }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Organisation Name
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.organization_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Is MSME Registered
                                </td>
                                <td style="border:0px;">
                                    {{ contact_form.is_msme_reg }}
                                </td>                                    
                            </tr>  
                            <tr>
                                <td style=" width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Email Address
                                </td>
                                <td style="width:40%;border:0px;">
                                    {{ contact_form.email }}
                                </td>  
                                <td style="border:0px;" class="error_field"></td>                                   
                            </tr>
                            <tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Phone/Mobile
                                </td>
                                <td style="width:40%;border:0px;">
                                    {{ contact_form.phone }}
                                </td>    
                                <td style="border:0px;" class="error_field"></td>                                   
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success" onclick="return check()" id="save_button">Update</button>
                    <button class="btn btn-sm btn-danger " type="button" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>

<!-- EDIT TAX DETAILS MODAL -->

<div class="modal fade" id="editTaxModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'edit_tax_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Tax Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <input type="hidden" value="{{tax_ins}}" name="obj_ins">
                    <table class="table-responsive">
                        <tbody style="display: inline-table;">
                            <tr>
                                <td style="  border:0px; vertical-align: bottom; color:#a7a4a4">
                                    PAN
                                </td>
                                <td style="width: 45%;border:0px;">
                                    {{ tax_form.pan }}
                                </td>    
                                <td style="border:0px;" class="error_field"></td>                                 
                            </tr>
                            <tr>
                                <td style=" width:170px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    GST Registration Type
                                </td>
                                <td style="border:0px;">
                                    {{ tax_form.gst_reg_type }}
                                </td>                                    
                            </tr>
                            <tr id="gst_row" style="display: none;">
                                <td style=" width:170px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    GSTIN 
                                </td>
                                <td style="border:0px;">
                                    {{ tax_form.gstin }}
                                     
                                </td> 
                                <td style="border:0px;" class="error_field"></td>  
                            </tr>
                            <!--
                            <tr>
                                <td style=" width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Business Reg. No.
                                </td>
                                <td style="border:0px;">
                                    {{ tax_form.business_reg_no }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style=" width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Tax Reg. No.
                                </td>
                                <td style="border:0px;">
                                    {{ tax_form.tax_reg_no }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style=" width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    CGST Reg. No.
                                </td>
                                <td style="border:0px;">
                                    {{ tax_form.cst_reg_no }}
                                </td>                                    
                            </tr>
                            -->
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Update</button>
                    <button class="btn btn-sm btn-danger" type="button" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>

<!-- EDIT ADDRESS MODAL -->

{% for i in contact_address_form %}

<div class="modal fade" id="editAddressModal-{{forloop.counter}}" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'edit_address_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Address Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <table class="table-responsive">
                        <tbody style=" width: 100%; display: inline-table;">
                            <tr>
                                <td style="text-align:left; padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: inherit">
                                    Is Shipping Address
                                </td>
                                <td style="border:0px; padding:0px">   
                                    {{ i.is_shipping_address  }}      
                                    {{ i.is_billing_address }}                                                       
                                    <label class="switch">         
                                        <input type="checkbox" class="checkbox_shipping" onclick="set_shipping($(this), '.shipping_address')" checked>                               
                                        <span class="slider round"></span>
                                    </label>

                                    <span style="margin-left: 40px; position: relative; top: 5px;">
                                        Is Billing Address
                                    </span>                                    
                                    <label class="switch" style="margin-left: 20px;">
                                        <input type="checkbox" class="checkbox_billing" onclick="set_billing($(this),'.billing_address')" checked>
                                        <span class="slider round"></span>
                                    </label>
                                </td>  
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Contact Person
                                </td>
                                <td style="border:0px;" >
                                    {{ i.contact_person}}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Flat/Building No.
                                </td>
                                <td style="border:0px;">
                                    {{ i.flat_no }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Street
                                </td>
                                <td style="border:0px;">
                                    {{ i.street }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    City
                                </td>
                                <td style="border:0px;">
                                    {{ i.city }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Pincode
                                </td>
                                <td style="border:0px;">
                                    {{ i.pincode }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    State
                                </td>
                                <td style="border:0px;">
                                    {{ i.state }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Country
                                </td>
                                <td style="border:0px;">
                                    {{ i.country }}
                                </td>                                    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Update</button>
                    <button class="btn btn-sm btn-danger" type="button" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>

{% endfor %}

<!-- NEW ADDRESS MODAL -->

<div class="modal fade" id="newAddressModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'add_address_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Add Address Details</h5>
                    <button type="reset" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% csrf_token %}
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <table class="table-responsive">
                        <tbody style=" width: 100%; display: inline-table;">
                            <tr>
                                <td style="text-align:left; padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: inherit">
                                    Is Shipping Address
                                </td>
                                <td style="border:0px; padding:0px">     
                                    {{ new_address_form.is_shipping_address  }}      
                                    {{ new_address_form.is_billing_address }}
                                                                                            
                                    <label class="switch">                                        
                                        <input type="checkbox" onclick="set_shipping($(this),'#id_is_shipping_address')" checked>
                                        <span class="slider round"></span>
                                    </label>

                                    <span style="margin-left: 40px; position: relative; top: 5px;">
                                        Is Billing Address
                                    </span>

                                    <label class="switch" style="margin-left: 20px;">                                        
                                        <input type="checkbox" onclick="set_billing($(this),'#id_is_billing_address')" checked>
                                        <span class="slider round"></span>
                                    </label>
                                </td>  
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Contact Person
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.contact_person}}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Flat/Building No.
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.flat_no }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Street
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.street }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    City
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.city }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Pincode
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.pincode }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    State
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.state }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Country
                                </td>
                                <td style="border:0px;">
                                    {{ new_address_form.country }}
                                </td>                                    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Add New</button>
                    <button class="btn btn-sm btn-danger" type="reset" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>

<!-- EDIT ACCOUNTS MODAL -->
{% for i in contact_accounts_form %}
<div class="modal fade" id="editAccountsModal-{{forloop.counter}}" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'edit_accounts_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Accounts Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    {% csrf_token %}
                    <table class="table-responsive">
                        <tbody style=" width:100%;display: inline-table;">
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Account Holder
                                </td>
                                <td style="border:0px;">
                                    {{ i.account_holder_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Account Number
                                </td>
                                <td style="border:0px;">
                                    {{ i.account_number }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:2px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    IFSC Code
                                </td>
                                <td style="border:0px;">
                                    {{ i.ifsc_code }}
                                </td>   
                                <td style="border:0px;width: 36%;" class="error_field"></td>                                  
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px;border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Bank Name
                                </td>
                                <td style="border:0px;">
                                    {{ i.bank_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px;border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Branch Name
                                </td>
                                <td style="border:0px;">
                                    {{ i.bank_branch_name }}
                                </td>                                    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Update</button>
                    <button class="btn btn-sm btn-danger" type="reset" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}

<!-- -->

<div class="modal fade" id="newAccountsModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'add_accounts_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Add Accounts Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    {% csrf_token %}
                    <table class="table-responsive">
                        <tbody style=" width: 100%; display: inline-table;">
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Account Holder
                                </td>
                                <td style="border:0px;width: 40%">
                                    {{ new_accounts_form.account_holder_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Account Number
                                </td>
                                <td style="border:0px;width: 40%">
                                    {{ new_accounts_form.account_number }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:2px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    IFSC Code
                                </td>
                                <td style="border:0px;width: 40%;">
                                    {{ new_accounts_form.ifsc_code }}
                                </td>                 
                                <td style="border:0px;" class="error_field"></td>                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Bank Name
                                </td>
                                <td style="border:0px;width: 40%">
                                    {{ new_accounts_form.bank_name }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Branch Name
                                </td>
                                <td style="border:0px;width: 40%">
                                    {{ new_accounts_form.bank_branch_name }}
                                </td>                                    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Add New</button>
                    <button class="btn btn-sm btn-danger" type="reset" data-dismiss="modal" aria-label="Close">Cancel</button>
                    
                </div>
            </form>
        </div>
    </div>
</div>


<!-- EDIT ORGANISATION MODAL -->

<div class="modal fade" id="editOrganisationModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" style="margin:0px" action="{% url 'edit_other_details_form' %}">
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Other Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <input type="hidden" value="{{tax_ins}}" name="obj_ins">
                    {% csrf_token %}
                    <table class="table-responsive">
                        <tbody style=" width: 100%; display: inline-table;">
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Preferred Currency
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.preferred_currency }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Opening Balance
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.opening_balance }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Payment Method
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.preferred_payment_method }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Preferred Delivery
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.preferred_delivery }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Invoice Terms
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.invoice_terms }}
                                </td>                                    
                            </tr>
                            <tr>
                                <td style="padding:0px 0px 0px 10px; width:150px; border:0px; vertical-align: bottom; color:#a7a4a4">
                                    Billing Terms
                                </td>
                                <td style="border:0px;">
                                    {{ other_details_form.bills_terms }}
                                </td>                                    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-success save_button" onclick="return check()">Update</button>
                    <button class="btn btn-sm btn-danger" type="reset" data-dismiss="modal" aria-label="Close">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>


<!-- EDIT SOCIAL MODAL -->

<div class="modal fade" id="editSocialModal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" style="background-color:currentcolor">
            <form method="post" enctype="multipart/form-data" style="margin:0px" action="{% url 'edit_social_details_form' %}">
                {% csrf_token %}
                <div class="modal-header bg-warning">
                    <h5 class="modal-title" style="color:#000000; font-weight:bold;">Edit Social Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" value="{{contact_ins}}" name="ids">
                    <table class="table-responsive">
                        <tbody style=" width: 99%; display: inline-table;">
                            <tr>
                                <td style="width:15%;border:0px; vertical-align: bottom">
                                    Website
                                </td>
                                <td style="width:50%;border:0px;">
                                    {{ social_form.website }}
                                     
                                </td>
                                <td style="border:0px;" class="error_field"></td>  
                            </tr>
                            
                            <tr>
                                <td style="border:0px; vertical-align: bottom">
                                    Facebook
                                </td>
                                <td style="border:0px;">
                                    {{ social_form.facebook }}
                                </td>
                                <td style="border:0px;" class="error_field"></td>  
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom">
                                    Twitter
                                </td>
                                <td style="border:0px;">
                                    {{ social_form.twitter }}
                                </td>
                                <td style="border:0px;" class="error_field"></td>  
                            </tr>
                            <tr>
                                <td style="border:0px; vertical-align: bottom">
                                    Notes
                                </td>
                                <td style="border:0px;">
                                    {{ social_form.notes }}
                                </td>
                            </tr>
                            <tr>
                                <td style="border:0px;">
                                    Attachments
                                </td>
                                <td style="border:0px;">
                                    {{ social_form.attachements }}
                                    <font color="white" style="font-size:x-small;">(File Size Less Than: 80 KB)</font>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="modal-footer">
                        <button class="btn btn-sm btn-success save_button" onclick="return check()">Update</button>
                        <button class="btn btn-sm btn-danger" type="reset" data-dismiss="modal" aria-label="Close">Cancel</button>
                        
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>



<script>

    var contact_ins = '{{contact_ins}}';

</script>