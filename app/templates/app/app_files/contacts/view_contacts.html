
<style>

</style>

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header card-header-primary">
                <div class="row">
                <div class="col">
                    <h4 class="card-title ">View Contacts</h4>
                </div>

                
                 <!-- added by roshan -->
                <!-- filter -->
                <!-- filter Cutomer Type -->
                <div class="col" >
                    <form action="{% url 'contacts' %}" method="get">
                        <div class="dropdown">
                        
                            <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"data-display="static" aria-haspopup="true" aria-expanded="false" style="float: right;">
                                Filter
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        
                            
                                <!-- filter CustomerType -->
                                <label class="form-check-label" style="margin-bottom: 3px;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#Customer" name="CustomerType" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Customer Type</span>
                                    </span>
                                </label>
                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse" id="Customer" >
                                    <div>
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Vendor" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Vendor</span>
                                            </span>
                                        </label>
                                        <!-- <label type="checkbox" class="row" style="padding-left:36px;padding-top: 8px;">
                                            
                                            <a type="checkbox" href="#" class="form-control" name="Vendor">Vendor</a>
                                            <font color="black" style="margin-left:7px;margin-top:-3px;">Vendor</font>
                                        </label> -->
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Empoloyee"style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Employee</span>
                                            </span>
                                        </label>
                                       
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Customer" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Customer</span>
                                            </span>
                                        </label>
        
                                    </div>
                                </div>
                                <!-- filter OrganizationType -->
                                <hr style="margin-top: 0px;margin-bottom: -1px">

                                <label class="form-check-label" style="margin-bottom: 3px;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#OrganizationType" role="button" aria-expanded="false" aria-controls="OrganizationType" name="OrganizationType" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Organisation Type</span>
                                    </span>
                                </label>

                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse"  id="OrganizationType">
                                    <div>
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Individual" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Individual</span>
                                            </span>
                                        </label>
                                        
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Proprietorship" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Proprietorship</span>
                                            </span>
                                        </label>

                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Partnership" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Partnership</span>
                                            </span>
                                        </label>
        
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Trust" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Trust</span>
                                            </span>
                                        </label>
                                        
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="GvtOrganization"style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Gvt Organisation</span>
                                            </span>
                                        </label>

                                    </div>
                                </div>
                                <!-- filter Active/Inactive  -->
                                <hr style="margin-top: 0px;margin-bottom: -1px">

                                <label class="form-check-label" style="margin-bottom: 3px;">
                                    <input class="form-check-input" type="checkbox" data-toggle="collapse" href="#status" role="button" aria-expanded="false" aria-controls="status" name="status" style="width: 111%;margin-left: -47%;">
                                    <span class="form-check-sign">
                                        <span class="check md" style="margin-left: 22px;color: black;">Status</span>
                                    </span>
                                </label>
                                
                                <hr style="margin-top: 0px;margin-bottom: -1px">
        
                                <div class="collapse" id="status">
                                    <div>
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="Yes" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Active</span>
                                            </span>
                                        </label>
        
                                        <label class="form-check-label" style="margin-bottom: 3px;">
                                            <input class="form-check-input" type="checkbox" name="No" style="width: 111%;margin-left: -38%;">
                                            <span class="form-check-sign">
                                                <span class="check" style="margin-left: 41px;color: black;">Inactive</span>
                                            </span>
                                        </label>
        
                                    </div>
                                </div> 
                                <hr style="margin-top: 0px;margin-bottom: -1px"> 
                            
                                <button type="submit" class="btn btn-success btn-xs" style="float: right;">OK</button> 
                            </div>
                        
                        </div>
                        </form>
                </div>
                    <!-- End filter -->
                </div>
            </div>
            <div class="card-body">
                <form method="get">
                    <div class="input-group pull-right" style="width:400px; margin-bottom:10px;">
                
                    <input name="search" type="text" class="form-control" placeholder="Contact / Organisation Name" style="height: 41px !important">
                    <div class="input-group-append">
                        <button class="btn btn-sm btn-success" type="submit()" style="border-radius:0px;">
                            <i class="material-icons">search</i> <span style="font-size:14px;">Search</span>
                        </button>
                    </div>
                    </div>
                </form>
                <div class="table">
                    <table class=" table-bordered" width="100%" cellspacing="0">
                        <thead  style="background-color: #EEEEEE; color:#000000; font-size:11px">
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;overflow: hidden;width: 5%">SL. No.</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;width: 11%">UID</th> -->
                            <th class="text-center" style="color:#000000; font-size:11px;width: 13%">Contact Name</th>
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">User APP-ID</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Customer Type</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Is Sub Customer</th> -->
                            <!-- <th class="text-center" style="color:#000000; font-size:11px">Organisation Type</th> -->
                            <th class="text-center" style="color:#000000; font-size:11px;width: 15%">Organisation Name</th>
                            <th class="text-center" style="color:#000000; font-size:11px;width: 15%">Email</th>
                            <th class="text-center" style="color:#000000; font-size:11px;width: 10%">Phone</th>
                            <!-- <th class="text-center" style="color:#000000; font-size:11px;width: 10%">location</th> -->
                            <th class="text-center" style="color:#000000; font-size:11px;width: 10%">Active</th>   
                            <th class="text-center" style="color:#000000; font-size:11px;width: 10%;">Action</th>                
                        </thead>
                        <tbody>
                            {% for contact in contacts %}
                                <tr id="t{{contact.id}}">
                                    <!-- <td>{{forloop.counter}}</td> -->
                                    <!-- <td>CT-0000{{contact.id}}</td> -->
                                    <td>{{contact.display_name|default_if_none:""|truncatechars:25}}</td>
                                    <!-- <td>{{contact.app_id}}</td>
                                    <td>{{contact.get_customer_type_display|upper}}</td>
                                    <td>{{contact.get_is_sub_customer_display|upper}}</td> -->
                                    
                                    <!-- <td>{{contact.get_organization_type_display|upper}}</td> -->
                                    <td>{{contact.organization_name|default_if_none:""|upper | truncatechars:25}}</td>
                                    <td>{{contact.email|default_if_none:""}}</td>
                                    <td>{{contact.phone|default_if_none:""}}</td>
                                    <!-- <td>{{contact.website}}</td>                         -->
                                    <td class="text-center">
                                        {% if contact.is_active %}
                                            <i id="{{contact.id}}" class="material-icons">check</i>
                                        {% else %}
                                            <i id="{{contact.id}}" class="material-icons">clear</i>
                                        {% endif %}
                                    </td>
                                    <td class="text-center">
                                        <!-- Dropdown Add by Roshan -->

                                        <div class="dropdown">
                                            <button class="btn btn-primary dropdown-toggle btn-sm" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >Action</button>

                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" title="Edit Contact" href="{% url 'edit-contact' contact.id %}" style="padding: 5px 5px;">Edit
                                                   <!--  <i class="material-icons">create</i> -->
                                                </a>
                                                {% if contact.is_active %}
                                                <a class="dropdown-item" title="Deactivate" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                                    <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Inactive</p>   
                                                </a>
                                                    <!-- <button class="dropdown-item" title="Deactivate"  onclick="status({{contact.id}})" style="padding: 5px 5px;">
                                                        <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Deactive</p>
                                                          <i class="material-icons">clear</i> 
                                                    </button> -->
                                                {% else %}
                                                <a class="dropdown-item" title="activate" data-toggle="modal" data-target="#status{{contact.id}}" style="padding:5px 5px;">
                                                    <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Active</p>   
                                                </a>
                                                    <!-- <button class="dropdown-item" title="Activate Contact"  onclick="status({{contact.id}})" href="{% url 'contact-status-change' 'activate' contact.id %}" style="padding: 5px 5px;">
                                                        <p id="s{{contact.id}}" style="margin-bottom:0px;margin-right: 67px;">Make Active</p>
                                                        <i class="material-icons">check</i>
                                                    </button> -->
                                                {% endif %}
                                                <!-- Added by dipika -->
                                                <a class="dropdown-item" title="Delete Contact"  style="padding: 5px 5px;"data-toggle="modal" data-target="#del{{contact.id}}">Delete
                                                   <!--  <i class="material-icons">delete_forever</i> -->
                                                </a>



                                                <a class="dropdown-item" title="View Collection For Contact" href="{% url 'contact-collections' contact.id %}" style="padding: 5px 5px;">Collect
                                                   <!--  <i class="material-icons">attach_money</i> -->
                                                </a>  
                                            </div>  


                                            <div class="modal " tabindex="-1" role="dialog" id="del{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                                <div class="modal-dialog" role="document" style="border-top: none;">
                                                    <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                        <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                            
                                                        </div>
                                                        <div class="modal-body" style="border-top: none;position: bottom;">
                                                            <h4><b><font color="black">Are you sure you want to delete {{contact.display_name}} </font></b></h4>
                                                        </div>
                                                        
                                                        <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                            <center><button onclick="remove({{contact.id}})" class="btn btn-success mr-2" style="align-content: left;">Yes</button></center>
                                                            <button id="{{contact.id}}" onclick="can({{contact.id}})" class="btn btn-warning">No</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                             <!-- DeactivePopup -->
                                        {% if contact.is_active %}
                                        <div class="modal " tabindex="-1" role="dialog" id="status{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                            <div class="modal-dialog" role="document" style="border-top: none;">
                                                <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                    <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                        
                                                    </div>
                                                    <div class="modal-body" style="border-top: none;position: bottom;">
                                                        <h4 ><b><center style="color: black;"id="text">Are you sure you want to make {{contact.display_name}} inactive </center></b></h4>
                                                    </div>
                                                    
                                                    <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                        <center><button onclick="status({{contact.id}},'{{contact.display_name}}')" class="btn btn-success mr-2" style="align-content: left;">Yes</button>
                                                        <button id="{{product.id}}" onclick="nodeactive({{contact.id}})" class="btn btn-warning">No</button></center>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% else %}
                                         <!-- ActivePopUp -->
                                         <div class="modal " tabindex="-1" role="dialog" id="status{{contact.id}}" style="border-top: none;left: 20%;top:200px;width: 500">
                                            <div class="modal-dialog" role="document" style="border-top: none;">
                                                <div class="modal-content" style="border-top: none;background:white;position:bottom">
                                                    <div class="modal-header" style="border-bottom: none;padding:5px;">
                                                        
                                                    </div>
                                                    <div class="modal-body" style="border-top: none;position: bottom;">
                                                        <h4 ><b><center style="color: black;" id="text">Are you sure you want to make {{contact.display_name}} active</center></b></h4>
                                                    </div>
                                                    
                                                    <div class="modal-footer" style="justify-content: flex-start; border-top: none;padding:6px;margin-left: 29%">
                                                        <center><button onclick="status({{contact.id}},'{{contact.display_name}}')" class="btn btn-success mr-2" style="align-content: left;">Yes</button>
                                                        <button id="{{contact.id}}" onclick="noactive({{contact.id}})" class="btn btn-warning">No</button></center>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                        </div>    


                                    </td>   
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>    
                </div>
            </div>
        </div>    
    </div>     
</div>

